<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">

    <style>
        .form-group {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }
        form label {
            width: 120px;
            font-size: 16px;
            text-align: right;
            margin-right: 10px;
        }
        form input {
            font-size: 16px;
            margin-bottom: 10px;
            width: 250px;
        }
        form button {
            font-size: 16px;
            display: block;
            margin-top: 20px;
        }
    </style>

    <script>
        function setAction(button) {
            const form = button.closest('form');
            form.action = button.value;
        }
    </script>

</head>
    <body>
        <h1>Metadata No.{{metadata.data_set_idx}} Detail Info</h1>
        <h3>새 디테일 입력</h3>
        <form id="create-form" method="post" action="" enctype="multipart/form-data">
            {% csrf_token %}
            <div class="form-group">
                <label for="snd_info">snd_info</label>
                <input type="text" name="snd_info" value="" required minlength="1" placeholder="varchar(150)">
            </div>
            <div class="form-group">
                <label for="snd_cate">snd_cate</label>
                <input type="text" name="snd_cate" value="" required minlength="1" placeholder="varchar(150)">
            </div>
            <div class="form-group">
                <label for="snd_sub_cate">snd_sub_cate</label>
                <input type="text" name="snd_sub_cate" value="" required minlength="1" placeholder="varchar(150)">
            </div>
            <div class="form-group">
                <label for="snd_cmnt">snd_cmnt</label>
                <input type="text" name="snd_cmnt" value="" required minlength="1" placeholder="varchar(150)">
            </div>
            <div class="form-group">
                <label for="snd_place">snd_place</label>
                <input type="text" name="snd_place" value="" required minlength="1" placeholder="varchar(150)">
            </div>
            <div class="form-group">
                <label for="snd_ni_db">snd_ni_db</label>
                <input type="text" name="snd_ni_db" value="" required minlength="1" placeholder="varchar(150)">
            </div>
            <div class="form-group">
                <label for="snd_ni_luf">snd_ni_luf</label>
                <input type="text" name="snd_ni_luf" value="" required minlength="1" placeholder="varchar(150)">
            </div>
            <div class="form-group">
                <label for="snd_srt_time">snd_srt_time</label>
                <input type="text" name="snd_srt_time" value="" required minlength="1" placeholder="varchar(150)">
            </div>
            <div class="form-group">
                <label for="snd_end_time">snd_end_time</label>
                <input type="text" name="snd_end_time" value="" required minlength="1" placeholder="varchar(150)">
            </div>
            <div class="form-group">
                <label for="snd_device">snd_device</label>
                <input type="text" name="snd_device" value="" required minlength="1" placeholder="varchar(150)">
            </div>
            <button type="submit" name="action" value="{% url 'rawsound:create_detail' metadata.data_set_idx %}" onclick="setAction(this)">Create</button>
        </form>

        {% for detail in detail_list %}
        <form id="form-id-{{ detail.snd_set_idx }}" method="post" action="" enctype="multipart/form-data">
            {% csrf_token %}
            <h3>Detail No.{{ detail.snd_set_idx }}</h3>
            <input type="hidden" name="snd_set_idx" value="{{ detail.snd_set_idx }}">
            <div class="form-group">
                <label for="snd_info">snd_info</label>
                <input type="text" name="snd_info" value="{{ detail.snd_info }}" required minlength="1" placeholder="varchar(150)">
            </div>
            <div class="form-group">
                <label for="snd_cate">snd_cate</label>
                <input type="text" name="snd_cate" value="{{ detail.snd_cate }}" required minlength="1" placeholder="varchar(150)">
            </div>
            <div class="form-group">
                <label for="snd_sub_cate">snd_sub_cate</label>
                <input type="text" name="snd_sub_cate" value="{{ detail.snd_sub_cate }}" required minlength="1" placeholder="varchar(150)">
            </div>
            <div class="form-group">
                <label for="snd_cmnt">snd_cmnt</label>
                <input type="text" name="snd_cmnt" value="{{ detail.snd_cmnt }}" required minlength="1" placeholder="varchar(150)">
            </div>
            <div class="form-group">
                <label for="snd_place">snd_place</label>
                <input type="text" name="snd_place" value="{{ detail.snd_place }}" required minlength="1" placeholder="varchar(150)">
            </div>
            <div class="form-group">
                <label for="snd_ni_db">snd_ni_db</label>
                <input type="text" name="snd_ni_db" value="{{ detail.snd_ni_db }}" required minlength="1" placeholder="varchar(150)">
            </div>
            <div class="form-group">
                <label for="snd_ni_luf">snd_ni_luf</label>
                <input type="text" name="snd_ni_luf" value="{{ detail.snd_ni_luf }}" required minlength="1" placeholder="varchar(150)">
            </div>
            <div class="form-group">
                <label for="snd_srt_time">snd_srt_time</label>
                <input type="text" name="snd_srt_time" value="{{ detail.snd_srt_time }}" required minlength="1" placeholder="varchar(150)">
            </div>
            <div class="form-group">
                <label for="snd_end_time">snd_end_time</label>
                <input type="text" name="snd_end_time" value="{{ detail.snd_end_time }}" required minlength="1" placeholder="varchar(150)">
            </div>
            <div class="form-group">
                <label for="snd_device">snd_device</label>
                <input type="text" name="snd_device" value="{{ detail.snd_device }}" required minlength="1" placeholder="varchar(150)">
            </div>
            <div class="form-group">
                <button type="submit" name="action" value="{% url 'rawsound:update_detail' detail.snd_set_idx %}" onclick="setAction(this)">Update</button>
                <button type="submit" name="action" value="{% url 'rawsound:delete_detail' detail.snd_set_idx %}" onclick="setAction(this)">Delete</button>
            </div>
        </form>
        {% empty %}
        <p>Detail이 없습니다</p>
        {% endfor %}

        {% if metadata %}
        <a href="{% url 'rawsound:metadata_info' metadata.data_set_idx %}">Go back to metadata info</a>
        {% endif %}
        <div class="form-group">
            <a href="{% url 'rawsound:metadata_list' %}">Go back to metadata list</a>
        </div>
    </body>
</html>
